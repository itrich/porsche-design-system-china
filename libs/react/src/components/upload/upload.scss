@import '../../styles/theme/index';

$upload: '.pui-upload';
$upload-item: '.pui-upload-list-item';
$picture-card-size: 160px;

@each $theme in $themes {
  .pui-theme-#{$theme} {
    @include theme($theme);

    #{$upload} {
      .pui-upload-tip {
        margin-top: 4px;
        line-height: 22px;
        font-size: 14px;
        color: $container-bg-color-5;
      }

      #{$upload}-container {
        display: inline-block;

        #{$upload}-field {
          display: inline-block;
          cursor: pointer;
          text-align: center;

          #{$upload}-drag {
            text-align: center;
            background: $background-color-2;
            border: 1px dashed $container-bg-color-3;
            border-radius: 4px;
            cursor: pointer;
            transition: border-color .3s;

            &:hover,
            &.is-dragOver {
              border-color: $container-bg-color-6;
            }
          }

          #{$upload}-btn {
            &#{$upload}-drag-btn {
              padding: 10px 0;

              .anticon-inbox {
                margin-bottom: 10px;
                font-size: 2em;
              }
            }
          }

          &#{$upload}-drag-field {
            display: block;
          }
        }
      }

      #{$upload}-drag-container {
        display: block;
      }

      #{$upload}-list {
        @extend %progress-fade;

        #{$upload-item} {
          position: relative;
          font-size: 14px;
          line-height: 1.6;

          #{$upload-item}-info {
            transition: background-color 0.3s;


            #{$upload-item}-name {
              width: 100%;
              padding-left: 3px;
              overflow: hidden;
              white-space: nowrap;
              text-overflow: ellipsis;
            }

            #{$upload}-list-text-icon {

              .porscheicon {
                vertical-align: -0.2em;

                svg {
                  width: 20px;
                  height: 20px;
                }
              }

              .porscheicon-icon_-loading {
                svg {
                  width: 16px;
                  height: 16px;
                }
              }
            }

            #{$upload-item}-card-actions {
              #{$upload-item}-card-actions-btn {
                opacity: 0;
                height: 100%;
                color: $container-bg-color-5;

                .porscheicon-icon_-delete {
                  font-size: 16px;
                }
              }
            }

            &:hover {
              #{$upload-item}-card-actions {
                #{$upload-item}-card-actions-btn {
                  opacity: 1;
                }
              }
            }
          }

          #{$upload}-list-info-content {
            display: flex;
            align-items: center;
            // display: block;
            width: 100%;
            height: 100%;
          }

          &-error {
            color: $brand-color;

            #{$upload-item}-info {
              #{$upload-item}-card-actions {
                #{$upload-item}-card-actions-btn {
                  opacity: 1;
                  color: $brand-color;
                }
              }
            }
          }

          &:hover {

            #{$upload-item}-info {
              background-color: $container-bg-color-1;
            }
          }
        }

      }

      #{$upload}-list-text {
        #{$upload-item} {
          margin-top: 5px;
        }
      }

      .pui-progress {
        position: absolute;
        bottom: -18px;
        left: 0;
        width: 100%;
      }

      // ======================== Picture Card ========================
      #{$upload}-list-picture-card {

        #{$upload}-list-picture-card-container {
          display: inline-block;
          width: $picture-card-size;
          height: $picture-card-size;
          margin: 0 8px 8px 0;
          vertical-align: top;
        }

        #{$upload}-list-info-content {
          display: block !important;
        }

        #{$upload-item} {
          position: relative;
          height: 100%;
          padding: 8px;
          border: 1px solid $container-bg-color-2;
          border-radius: 2px;

          &:hover {
            background: transparent;
          }

          &-error {
            border-color: $brand-color;

          }

          &:hover {
            #{$upload-item}-info {
              &::before {
                opacity: 1;
              }
            }
          }
        }

        #{$upload-item}-info {
          position: relative;
          height: 100%;
          overflow: hidden;

          &::before {
            position: absolute;
            z-index: 1;
            width: 100%;
            height: 100%;
            background-color: $text-opacity-color-2;
            opacity: 0;
            transition: all 0.3s;
            content: ' ';
          }

          &:hover {
            +#{$upload-item}-actions {
              opacity: 1;
            }
          }
        }

        #{$upload-item}-actions {
          position: absolute;
          top: 50%;
          left: 50%;
          z-index: 10;
          white-space: nowrap;
          transform: translate(-50%, -50%);
          opacity: 0;
          transition: all 0.3s;

          &:hover {
            opacity: 1;
          }

          .porscheicon-icon_-view,
          .porscheicon-icon_-delete {
            width: 18px;
            margin: 0 4px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            color: $container-bg-color-1;

            &:hover {
              color: $text-color-2;
            }
          }

          .pui-upload-list-item-card-actions-btn {
            .pui-button-icon {
              pointer-events: inherit;
            }
          }
        }

        #{$upload-item}-thumbnail {
          text-align: center;

          .porscheicon-icon_-image {
            vertical-align: -0.7em;
            font-size: 32px;
            color: $text-link-color;
          }
        }

        #{$upload-item}-thumbnail,
        #{$upload-item}-thumbnail img {
          position: static;
          display: block;
          width: 100%;
          height: 100%;
          object-fit: contain;
        }

        #{$upload-item}-name {
          display: none;
          margin: 8px 0 0;
          padding: 0;
          // line-height: @line-height-base;
          text-align: center;
        }

        #{$upload-item}-file+#{$upload-item}-name {
          position: absolute;
          bottom: 10px;
          display: block;
        }

        .pui-upload-btn-picture-card {
          display: flex;
          align-items: center;
          flex-direction: column;
          justify-content: center;
          width: $picture-card-size;
          height: $picture-card-size;
          margin-right: 8px;
          margin-bottom: 8px;
          text-align: center;
          vertical-align: top;
          background-color: $container-bg-color-1;
          border: 1px dashed $container-bg-color-3;
          border-radius: 2px;
          cursor: pointer;
          transition: border-color 0.3s;

          &:hover {
            border-color: $container-bg-color-5;
          }
        }

        .pui-progress {
          top: 50%;
          transform: translateY(-50%);
          padding: 0 10px;
          bottom: unset;

          .pui-progress-outer {
            height: 2px;
            margin-right: 0;
          }

          .pui-progress-text {
            display: none;
          }
        }
      }

    }

    %progress-fade {

      #{$upload}-progress-enter,
      #{$upload}-progress-appear {
        opacity: 0;
      }

      #{$upload}-progress-enter-active,
      #{$upload}-progress-appear-active {
        opacity: 1;
        transition: all 0.3s ease-in;
      }

      #{$upload}-progress-enter-done {
        opacity: 1;
      }

      #{$upload}-progress-exit {
        opacity: 1;
      }

      #{$upload}-progress-exit-active {
        opacity: 0;
        transition: all 0.3s ease-in;
      }

      #{$upload}-progress-exit-done {
        opacity: 0;
      }
    }

  }
}